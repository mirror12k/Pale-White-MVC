
controller MainController {
	path "/" {
		render MoreTemplate title="My Controller", name="amy", source="jack";
	}

	path "/args/{{title}}/{{source}}" {
		validate title as add_punctuation;
		validate source as source_link;

		action say_hello msg="this is my message";

		render MoreTemplate title=title, name="amy", source=source;
	}

	path "/link/{{link}}" {
		link = model UserLinkModel id=link;
		render LinkTemplate link=link;
	}

	path "/link_by_path" [link_path] {
		link = model UserLinkModel link=link_path;
		render LinkTemplate link=link;
	}

	validator add_punctuation {{
		return "${value}!";
	}}

	validator source_link {{
		return "http://${value}";
	}}

	action say_hello {{
		$msg = (string)$args['msg'];
		error_log("hello: $msg");
	}}
}
